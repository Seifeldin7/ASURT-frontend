<div class=" body  ">
  <app-sidenav></app-sidenav>
  <nav class="navbar  bg-dark">
    <button class="btn btn-outline-primary" appSidenavToggler> <i class="fas fa-bars"></i> </button>
  </nav>
  <div class="container con my-3 p-2">
    <div class="container bar ">
      <div class=" row">
        <div class="col-md-10 offset-md-1 mt-5">
          <h2 id="h" *ngIf="!editMode">Create Your Profile</h2>
          <h2 id="h" *ngIf="editMode">Edit Your Profile</h2>
        </div>
      </div>
    </div>
    <div class="container wh">

      <form (ngSubmit)="onSubmit(f)" #f="ngForm">
        <div class="container ">
          <div class="row">
            <div class="  col-md-10 offset-md-1">
              <div *ngIf="(!editMode || (editpic && editMode)) && !savepic" class=" form-group ">
                <label for="image" class="mr-4">Profile Pic</label>
                <div class="row">
                  <img-cropper [image]="data" [settings]="cropperSettings" accept=".png, .jpg, .jpeg, .pdf">
                  </img-cropper>
                  <img *ngIf="savepic" [src]="data.image" [width]="cropperSettings.croppedWidth"
                    [height]="cropperSettings.croppedHeight" class="ml-3" />
                </div>
                <div class="row">
                  <button type="button" class="btn btn-danger mt-1" [disabled]="savepic"
                    (click)="onSave()">Save</button>
                  <button type="button" class="btn btn-danger ml-3 mt-1" (click)="onCancelpic()">Cancel</button>
                </div>

              </div>
              <div *ngIf="editMode && !editpic &&!savepic" class="my-2">
                <div class="  col-12 text-center">

                  <img *ngIf="profil.profile_pic " [src]="profil.profile_pic" class="img-responsive  rounded-circle">
                  <br>
                  <button type="button" class="btn btn-danger mt-1" (click)="oneditpic()">Edit profile pic</button>
                  <button type="button" [disabled]="removed" class="btn btn-danger mt-1 mx-2"
                    (click)="onremovepic()">Remove profile pic</button>
                </div>
              </div>
              <div *ngIf = "savepic" class="my-2">
                <div class="  col-12 text-center">
                  <img  [src]="data.image" class="img-responsive  rounded-circle">
                  <br>
                  <button type="button" class="btn btn-danger ml-3 mt-1" (click)="onCancelpic()">Cancel</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="name">Full Name</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fas fa-user "></i>
                  </div>
                </div>
                <input type="text" id="name" name="name" placeholder="ex: firstname middlenaame lastname"
                  pattern="^([a-zA-Z]{2,20})(\s)([a-zA-Z]{2,20})(\s)([a-zA-Z]{2,20})" class="form-control" ngModel
                  required #name="ngModel">
              </div>
              <span class="help-block text-danger" *ngIf="!name.valid && name.touched && name.dirty">please enter your
                name as follows "first middle last"</span>
              <span class="help-block text-danger" *ngIf="!name.valid && name.touched && !name.dirty">this field is
                required</span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="mobile">Mobile</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fas fa-mobile-alt"></i>
                  </div>
                </div>
                <input type="text" id="mobile" pattern="^(0)(\d{10})" name="mobile" class="form-control" ngModel
                  placeholder="01xxxxxxxxx" #mobile="ngModel">
              </div>
              <span class="help-block text-danger" *ngIf="!mobile.valid && mobile.touched && mobile.dirty">this mobile
                number is not valid</span>
              <span class="help-block text-danger" *ngIf="!mobile.valid && mobile.touched && !mobile.dirty">this field
                is required</span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="uni">University</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fas fa-university"></i>
                  </div>
                </div>
                <input type="text" id="uni" name="uni" class="form-control" placeholder="university" ngModel required
                  #uni="ngModel">
              </div>
              <span class="help-block text-danger" *ngIf="!uni.valid && uni.touched">this is a required field</span>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="faculty">Faculty</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fas fa-university"></i>
                  </div>
                </div>
                <input type="text" id="faculty" name="faculty" placeholder="faculty" class="form-control" ngModel
                  required #faculty="ngModel">
              </div>
              <span class="help-block text-danger" *ngIf="!faculty.valid && faculty.touched">this is a required
                field</span>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="coll_id">College ID</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fas fa-university"></i>
                  </div>
                </div>
                <input type="text" id="coll_id" name="coll_id" class="form-control" placeholder="College ID" ngModel
                  required #coll_id="ngModel">
              </div>
              <span class="help-block text-danger" *ngIf="!coll_id.valid && coll_id.touched">this is a required
                field</span>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="coll_dep">College Department</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fas fa-university"></i>
                  </div>
                </div>
                <input type="text" id="coll_dep" name="coll_dep" placeholder="department" class="form-control" ngModel
                  required #coll_dep="ngModel">
              </div>
              <span class="help-block text-danger" *ngIf="!coll_dep.valid && coll_dep.touched">this is a required
                field</span>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="grad_year">Expected Year Of Graduation</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fas fa-university"></i>
                  </div>
                </div>
                <select id="grad_year" name="grad_year" placeholder="ex: 2020" class="form-control" ngModel required
                  #grad_year="ngModel">
                  <option value='2019'>2019</option>
                  <option value='2020'>2020</option>
                  <option value='2021'>2021</option>
                  <option value='2021'>2022</option>
                  <option value='2021'>2023</option>
                </select>
              </div>
              <span class="help-block text-danger"
                *ngIf="!grad_year.valid && grad_year.touched && !grad_year.dirty">this field is required</span>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="address">Address</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fa fa-address-card "></i>
                  </div>
                </div>
                <input type="text" id="address" name="address" class="form-control" ngModel required
                  placeholder="address" #address="ngModel">
              </div>
              <span class="help-block text-danger" *ngIf="!address.valid && address.touched">this is a required
                field</span>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="dob">Date Of Birth</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fa fa-address-card "></i>
                  </div>
                </div>
                <input type="date" id="dob" name="dob" class="form-control" ngModel required #dob="ngModel">
              </div>
              <span class="help-block text-danger" *ngIf="!dob.valid && dob.touched">this is a required field</span>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="n_id">National ID</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fa fa-address-card "></i>
                  </div>
                </div>
                <input type="text" name="n_id" id="n_id" placeholder="national id" pattern="^(\d{14})"
                  class="form-control" ngModel required #n_id="ngModel">
              </div>
              <span class="help-block text-danger" *ngIf="!n_id.valid && n_id.touched && n_id.dirty">this id is not
                correct</span>
              <span class="help-block text-danger" *ngIf="!n_id.valid && n_id.touched && !n_id.dirty">this field is
                required</span>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="n_id_f_c">National ID Front Cover</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fa fa-address-card "></i>
                  </div>
                </div>
                <input (change)="onUploadChange($event,1)" name="n_id_f_c" accept=".png, .jpg, .jpeg, .pdf" type="file"
                  id="n_id_f_c" class="form-control" ngModel [required]="!editMode" #n_id_f_c="ngModel"
                  ngf-max-size="500KB">
              </div>
              <span class="help-block text-danger" *ngIf="!n_id_f_c.valid && n_id_f_c.touched && !n_id_f_c.dirty">this
                field is
                required</span>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="n_id_b_c">National ID Back Cover</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fa fa-address-card "></i>
                  </div>
                </div>
                <input (change)="onUploadChange($event,2)" name="n_id_b_c" accept=".png, .jpg, .jpeg, .pdf" type="file"
                  id="n_id_b_c" class="form-control" ngModel [required]="!editMode" #n_id_b_c="ngModel"
                  ngf-max-size="500KB">
              </div>
              <span class="help-block text-danger" *ngIf="!n_id_b_c.valid && n_id_b_c.touched && !n_id_b_c.dirty">this
                field is
                required</span>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="pass_id">Passport ID</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fa fa-address-card "></i>
                  </div>
                </div>
                <input type="text" id="pass_id" name="pass_id" class="form-control" placeholder="passport id" ngModel
                  #pass_id="ngModel">
              </div>


            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="pass_id_img">Passport ID First Page Image</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fa fa-address-card "></i>
                  </div>
                </div>
                <input (change)="onUploadChange($event,3)" name="pass_id_img" accept=".png, .jpg, .jpeg, .pdf"
                  type="file" id="pass_id_img" class="form-control" ngModel #pass_id_img="ngModel" ngf-max-size="500KB">
              </div>


            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="em_name">Emergecy Contact Name</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fas fa-user "></i>
                  </div>
                </div>
                <input type="text" id="em_name" name="em_name" class="form-control"
                  placeholder="ex: firstname middlenaame lastname" ngModel required #em_name="ngModel"
                  pattern="([a-zA-Z]{2,20})(\s)([a-zA-Z]{2,20})(\s)([a-zA-Z]{2,20})">
              </div>
              <span class="help-block text-danger" *ngIf="!em_name.valid && em_name.touched && em_name.dirty">please
                enter the name as follows "first middle last"</span>
              <span class="help-block text-danger" *ngIf="!em_name.valid && em_name.touched && !em_name.dirty">this
                field is required</span>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="em_mobile">Emergecy Contact Mobile</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fas fa-mobile-alt"></i>
                  </div>
                </div>
                <input type="text" id="em_mobile" name="em_mobile" class="form-control" pattern="^(0)(\d{10})"
                  placeholder="ex: 01xxxxxxxx" ngModel required #em_mobile="ngModel">
              </div>
              <span class="help-block text-danger" *ngIf="!em_mobile.valid && em_mobile.touched && em_mobile.dirty">this
                number is not valid</span>
              <span class="help-block text-danger"
                *ngIf="!em_mobile.valid && em_mobile.touched && !em_mobile.dirty">this field is required</span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <div class="form-group">
              <label for="em_relation">Emergecy Contact Relation</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text red">
                    <i class="fas fa-user "></i>
                  </div>
                </div>
                <input type="text" id="em_relation" name="em_relation" class="form-control" placeholder="ex: cousin"
                  ngModel required #em_relation="ngModel">
              </div>
              <span class="help-block text-danger"
                *ngIf="!em_relation.valid && em_relation.touched && !em_relation.dirty">this field is
                required</span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <button type="submit" class="btn btn-danger" [disabled]="!f.valid || submitBtn"
              style="margin-right:5px;">{{editMode ? 'Edit' : 'Create'}}</button>
            <img *ngIf="loading"
              src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
            <button type="button" class="btn btn-link" (click)="onCancel()">Cancel</button>
          </div>
        </div>


      </form>

    </div>
  </div>
</div>